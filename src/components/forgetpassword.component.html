<!-- forgot-password.component.html -->
<div class="container-fluid">
  <div class="row justify-content-center align-items-center" style="height: 100vh;">
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <!-- Forgot Password Form -->
          <form id="register-form" role="form" autocomplete="off" class="form" *ngIf="!otpSubmitted && !passwordUpdated"
            (ngSubmit)="submitForm()" #passwordResetForm="ngForm">
            <h3 class="card-title text-center mb-4">Forgot Password</h3>
            <div class="form-group">
              <label for="email">Email address</label>
              <input type="email" class="form-control" id="email" name="email" placeholder="Enter email" [(ngModel)]="email"
                required>
              <label for="text">Username</label>
              <input type="text" class="form-control" name="username" [(ngModel)]="username" placeholder="Username"
                required>

            </div>
            <button type="submit" [disabled]="passwordResetForm.invalid || isSubmitted" class="btn btn-primary btn-block">Submit</button>
          </form>

          <!-- OTP Form -->
          <form id="otp-form" role="form" autocomplete="off" class="otp-form" #otpForm="ngForm" *ngIf="otpSubmitted && !passwordUpdated">            <h3 class="card-title text-center mb-4">OTP Verification</h3>
            <div class="form-group">
              <label for="otp">Enter OTP</label>
              <input type="text" class="form-control" id="otp" name="otp" placeholder="Enter OTP" [(ngModel)]="otp" required>
            </div>
            <button type="submit" [disabled]="!otp" (click)="submitOTP()" class="btn btn-primary btn-block">Verify OTP</button>
          </form>

          <!-- Reset Password Form -->
          <form class="passwordform" *ngIf="passwordUpdated">
            <h3 class="card-title text-center mb-4">Reset Password</h3>
            <div class="form-group">
              <label for="newPassword">New Password</label>
              <input type="password" class="form-control" name="newPassword"
              [(ngModel)]="newPassword" 
                placeholder="Enter new password" required
                pattern="(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[a-zA-Z\d!@#$%^&*]{8,}$/)">
            </div>
            <div class="form-group">
              <label for="confirmPassword">Re-enter Password</label>
              <input type="password" class="form-control"  name="confirmPassword"
              [(ngModel)]="confirmPassword"
                placeholder="Re-enter new password" pattern="{{ newPassword }}">
            </div>
            <button type="submit" [disabled]="newPassword !== confirmPassword"
            (click)="updatePassword()" class="btn btn-primary btn-block" routerLink="/signIn">Save Password</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>